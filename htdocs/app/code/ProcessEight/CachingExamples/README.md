# Process Eight CachingExamples

## Purpose

Miscellaneous research relating to caching in Magento 2.

## Research

### Demonstrate the ability to manage the cache

#### Describe cache types and the tools used to manage caches

There are thirteen cache types, defined in seven `etc/cache.xml` files.

@todo Can cache.xml be defined in different areas (frontend, adminhtml, webapi_rest, etc)?

@todo What invalidates each of these caches? Hint: Look through tests and see it there are any which test cache invalidation

##### Cache types

###### Configuration (`config`)

Purpose: Caches configuration stored in XML files (where the parent node is `<config>`) and in the `core_config_data` table of the database.

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml`

Invalidated by the following actions/processes: Editing any XML file with a parent node of `<config>`, or updating the `core_config_data` table via the admin. (@todo Does directly editing the `core_config_data` table invalidate the cache?)

###### Layout (`layout`)

Purpose: Caches Layout XML directives defined in Layout XML files and in 'Layout Updates' sections of the admin. (@todo Verify that Layout XML directives defined in 'Layout Updates' sections of the admin are actually cached).

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml`

Invalidated by the following actions/processes:

###### Blocks HTML Output (`block_html`)

Purpose: Caches the HTML output of the block rendering process (e.g. The _toHtml() method of each block).

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml` 

Invalidated by the following actions/processes:

###### Collections Data (`collections`)

Purpose: Caches the result of loading EAV collections.

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml`

Invalidated by the following actions/processes:

###### Reflections Data (`reflection`)

Purpose: Reflection data generated by reflecting the API interface classes (those located in the `Api` folder of each module).

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml`

Invalidated by the following actions/processes:

###### Database DDL Operations (`db_ddl`)

Purpose: Caches results of DDL operations, e.g. Describing database tables or indexes.

Defined in: `htdocs/vendor/magento/module-store/etc/cache.xml`

Invalidated by the following actions/processes:

###### EAV Types and Attributes (`eav`)

Purpose: Caches data relating to EAV entities, attributes, attribute codes and attribute sets.

Defined in: `htdocs/vendor/magento/module-eav/etc/cache.xml` 

Invalidated by the following actions/processes:

###### Customer Notification (`customer_notification`)

Purpose: Not entirely sure. Seems to cache a flag upon saving the Customer/Customer Address entity (See `\Magento\Customer\Model\ResourceModel\Customer::_afterSave`), which is then retrieved in a plugin which regenerates the Customer's session (See: `\Magento\Customer\Model\Plugin\CustomerNotification::beforeDispatch`).

Defined in: `htdocs/vendor/magento/module-customer/etc/cache.xml`

Invalidated by the following actions/processes:

###### Integrations Configuration (`config_integration`)

Purpose: 

Defined in: `htdocs/vendor/magento/module-integration/etc/cache.xml`

Invalidated by the following actions/processes:

###### Integrations API Configuration (`config_integration_api`)

Purpose: 

Defined in: `htdocs/vendor/magento/module-integration/etc/cache.xml`

Invalidated by the following actions/processes:

###### Page Cache (`full_page`)

Purpose: Caches the results of rendering entire pages, not just individual blocks.

Defined in: `htdocs/vendor/magento/module-page-cache/etc/cache.xml`

Invalidated by the following actions/processes:

###### Translations (`translate`)

Purpose: Caches translations read from translation files. (@todo Verify that this caches translations added in the admin/through other methods (if there are other methods) as well)

Defined in: `htdocs/vendor/magento/module-translation/etc/cache.xml`

Invalidated by the following actions/processes:

###### Web Services Configuration (`config_webservice`)

Purpose: REST and SOAP configurations, generated WSDL file.

Defined in: `htdocs/vendor/magento/module-webapi/etc/cache.xml`

Invalidated by the following actions/processes:

##### Tools used to manage caches

###### The `bin/magento` cache commands

What do they do?

What is the difference between `cache:clean` and `cache:flush`?

How do they manage/handle cleaning caches stored in alternative (non-file based) storage (e.g. Redis)?

Are there any other core tools used to manage/manipulate the cache?
